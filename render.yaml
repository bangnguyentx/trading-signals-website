# trading-signals-website/render.yaml
services:
  # 1. Dịch vụ Web (chạy app Flask)
  - type: web
    name: trading-signals-web
    env: python
    buildCommand: "pip install -r requirements.txt"
    startCommand: "gunicorn app:app" # Sử dụng gunicorn cho production
    envVars:
      - key: PYTHON_VERSION
        value: 3.11.7
      # Thêm các biến môi trường khác nếu cần
      # - key: ADMIN_SECRET
      #   value: "your-secret-key"

  # 2. Dịch vụ Worker (chạy hàm scan() nền)
  - type: worker
    name: trading-signals-scanner
    env: python
    buildCommand: "pip install -r requirements.txt"
    startCommand: "python -c 'from app import run_scheduler; run_scheduler()'" # Chạy scheduler
    envVars:
      - key: PYTHON_VERSION
        value: 3.11.7
